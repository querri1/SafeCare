# 云存储文件上传指南

## 📋 概述

为了减小小程序包体积，视频和音频文件需要上传到云存储，然后通过云存储路径访问。

## 🎬 第一步：上传视频文件（八段锦）

### 1. 打开云开发控制台
- 在微信开发者工具中，点击右上角 **「云开发」** 按钮
- 选择环境：`cloud1-4ghau10w942b2505`
- 点击左侧 **「存储」** 菜单

### 2. 创建文件夹结构
- 点击 **「新建文件夹」**
- 创建文件夹：`video`
- 进入 `video` 文件夹

### 3. 上传视频文件
- 点击 **「上传文件」**
- 选择文件：`miniprogram/video/baduanjin-9f2582a4.mp4`
- 等待上传完成

### 4. 获取云存储路径
- 上传完成后，点击文件右侧的 **「详情」** 或直接查看文件列表
- 复制 **「File ID」**，格式类似：
  ```
  cloud://cloud1-4ghau10w942b2505.636c-cloud1-4ghau10w942b2505-1301234567/video/baduanjin-9f2582a4.mp4
  ```

### 5. 更新代码
打开 `miniprogram/pages/baduanjin/baduanjin.js`，找到第 15 行左右：

```js
const cloudPath = 'cloud://cloud1-4ghau10w942b2505.636c-cloud1-4ghau10w942b2505-1301234567/video/baduanjin-9f2582a4.mp4'
```

将 `cloudPath` 的值替换为你刚才复制的 **File ID**。

---

## 🎵 第二步：上传音频文件（角音音乐）

### 1. 创建音频文件夹
- 在云开发控制台 → 存储
- 创建文件夹：`audio`
- 进入 `audio` 文件夹
- 再创建子文件夹：`jue`
- 进入 `jue` 文件夹

### 2. 批量上传音频文件
- 点击 **「上传文件」**
- 选择以下所有文件（可以多选）：
  - `jue-01-jiangnan-sizhu.mp3`
  - `jue-02-caomu-qingqing.mp3`
  - `jue-03-liezi-yufeng.mp3`
  - `jue-04-jiangnan-hao.mp3`
  - `jue-05-gusuxing-orc.mp3`
  - `jue-06-hujia-shibapai.mp3`
  - `jue-08-chunfeng-deyi.mp3`
  - `jue-09-mumin-xinge.mp3.mp3`
  - `jue-10-zhuangzhou-mengdie.mp3`
  - `jue-11-gusuxing-yuxunfa.mp3`
  - `jue-12-zhegufei.mp3`

### 3. 获取所有文件的 File ID
上传完成后，记录每个文件的 **File ID**，格式类似：
```
cloud://cloud1-4ghau10w942b2505.636c-cloud1-4ghau10w942b2505-1301234567/audio/jue/jue-01-jiangnan-sizhu.mp3
```

### 4. 更新代码
打开 `miniprogram/pages/music-therapy/music-therapy.js`，找到 `juePlaylistCloudPaths` 数组（大约第 12-24 行），将每个路径替换为你实际获取的 **File ID**。

**注意**：
- 路径中的环境ID部分（`cloud1-4ghau10w942b2505.636c-cloud1-4ghau10w942b2505-1301234567`）需要替换为你实际环境的值
- 确保路径顺序与文件名顺序一致

---

## ✅ 第三步：验证

### 1. 重新编译小程序
- 在微信开发者工具中点击 **「编译」**

### 2. 测试视频播放
- 进入治愈中心 → 点击「八段锦练习」
- 应该能看到视频正常加载和播放

### 3. 测试音频播放
- 进入治愈中心 → 点击「五音疗法 - 角音」
- 选择角音并确认
- 应该能听到音乐正常播放

---

## 🔍 常见问题

### Q1: 如何找到正确的 File ID？
**A**: 在云开发控制台 → 存储 → 点击文件 → 查看详情，复制 **File ID** 字段。

### Q2: 路径格式是什么？
**A**: 格式为 `cloud://环境ID.云存储标识/文件夹/文件名`，例如：
```
cloud://cloud1-4ghau10w942b2505.636c-cloud1-4ghau10w942b2505-1301234567/video/baduanjin-9f2582a4.mp4
```

### Q3: 上传后文件无法访问？
**A**: 检查：
1. 文件是否上传成功（在存储列表中能看到）
2. File ID 是否复制完整（包括 `cloud://` 前缀）
3. 代码中的路径是否与 File ID 完全一致

### Q4: 音频播放失败？
**A**: 检查：
1. 所有音频文件是否都已上传
2. `juePlaylistCloudPaths` 数组中的路径是否都正确
3. 控制台是否有错误信息

---

## 📝 注意事项

1. **文件大小限制**：单个文件不超过 200MB
2. **存储配额**：注意云存储的免费配额，超出后需要付费
3. **文件命名**：建议保持文件名与本地一致，便于管理
4. **路径更新**：如果重新上传文件，File ID 可能会变化，需要重新更新代码

---

## 🎯 完成后的效果

- ✅ 小程序包体积大幅减小（从 140MB 降到几 MB）
- ✅ 可以正常进行真机调试
- ✅ 视频和音频通过云存储 CDN 加速，加载更快
- ✅ 文件管理更灵活，可以随时在控制台更新文件

